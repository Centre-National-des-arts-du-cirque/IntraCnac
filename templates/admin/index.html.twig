{% extends 'admin/base_admin.html.twig' %}


{% block title %}Hello AdminController!{% endblock %}

{% block body %}
{% block stylesheets %}
 <link rel="stylesheet" href="{{ asset('styles/admin/admin.css') }}">
  
{% endblock %}
{% block javascripts %}
<script type="module" src="{{ asset('js/admin/showTicketsAdmin.js') }}"></script>
{% endblock %}
<!DOCTYPE html>
<html lang="fr">

    

    <div class="central">
         <h2>Tickets en cours</h2>
        <div class='table-container'>
           
                <table>
                    <thead>
                        <tr>
                            <th>Titre</th>
                            <th>Type</th>
                            <th>Date de création</th>
                            <th>Résolu</th>
                            <th>Créé par</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for ticket in tickets %}
                        {% set date = ticket.date|date("d/M/Y") %}
                        <tr>
                        
                            <td>{{ticket.title}}</td>
                            
                            <td>{% if ticket.className == "ItTicket" %}
                                    Informatique
                                {% elseif ticket.className == "BuildingTicket" %}
                                    Bâtiment
                                {% elseif ticket.className == "VehicleTicket" %}
                                    Véhicule
                                {% endif %}
                            </td>
                            <td>{{date}}</td>
                            <td>{{ticket.solved ? 'Oui' : 'Non'}}</td>
                            <td>{{ticket.createBy.name}} {{ticket.createBy.lastName}}</td>
                            <td>
                                <div class="action-buttons-card">
                                    <a href="#" class="ticket-link" data-id="{{ticket.id}}"><button class="info-btn" title="Plus d'infos"><i class="fas fa-info"></i></button></a>
                                    <button class="resolve-btn" title="Marquer comme résolu"><i class="fas fa-check"></i></button>
                                    <button class="delete-btn" title="Supprimer"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

        
        </div>
    
        <div class="ticket-info-card">
           
            <div class='left-info-card'>
                <div class='left-card-header'>
                    <h3 class="ticket-title"></h3>
                </div>
                <div class='card-info'>
                    <div class='description-info'>
                        <p class="ticket-description-title"><strong>Description complète du ticket</strong> </p>
                        <p class='ticket-description'> </p>
                    </div>
                    <div class='card-info-left'>
                        <p class='ticket-date'><strong>Date de création:</strong> </p>
                        <p class='ticket-solved'><strong>Resolu:</strong></p>
                    </div>
            </div>
                     <div class='left-card-footer'>
                        <button class="resolve-btn" title="Marquer comme résolu"><i class="fas fa-check"></i></button>
                        <button class="delete-btn" title="Supprimer"><i class="fas fa-trash"></i></button>
                    </div>
               
                
            </div>
            <div class='right-info-card'>
                <h3>Informations complémentaires</h3>
                <p class="createBy"><strong>Créé par:</strong></p>
                <p class="localisation"><strong>Localisation:</strong>  </p>
                <p class="site"><strong>Site:</strong></p>
                <p class="errorCode"><strong>Code d'erreur:</strong> </p></p>
                <p class="pcName"><strong>Nom du PC:</strong> </p>
                <p class="brand"><strong>Marque:</strong>  </p>
                <p class="immat"><strong>Immatriculation</strong></p>
            </div>
    </div>

{% endblock %}
